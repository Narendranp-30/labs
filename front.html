<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
</head>
<body>
    <h1>Shopping Cart</h1>
    <div>
        <label for="productId">Product ID:</label>
        <input type="number" id="productId" min="1" value="1">
        <br>
        <label for="productName">Product Name:</label>
        <input type="text" id="productName">
        <br>
        <label for="price">Price:</label>
        <input type="number" id="price" min="0" step="0.01">
        <br>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" min="1" value="1">
        <br>
        <label for="description">Description:</label>
        <input type="text" id="description">
        <br>
        <label for="category">Category:</label>
        <input type="text" id="category">
        <br>
        <label for="image">Image URL:</label>
        <input type="text" id="image">
        <br>
        <button onclick="addItemToCart()">Add to Cart</button>
    </div>

    <h2>Cart Items</h2>
    <ul id="cartItemsList"></ul>

    <script>
        function addItemToCart() {
            const productId = document.getElementById('productId').value;
            const productName = document.getElementById('productName').value;
            const price = document.getElementById('price').value;
            const quantity = document.getElementById('quantity').value;
            const description = document.getElementById('description').value;
            const category = document.getElementById('category').value;
            const image = document.getElementById('image').value;

            const data = {
                productId,
                productName,
                price,
                quantity,
                description,
                category,
                image
            };

            fetch('http://localhost:3000/addToCart', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Failed to add item to cart');
                }
            })
            .then(data => {
                alert(data.message);
                fetchCartItems(); // Fetch updated cart items after adding a new item
            })
            .catch(error => {
                console.error('Error adding item to cart:', error);
            });
        }

        function fetchCartItems() {
            fetch('http://localhost:3000/getCartItems')
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Failed to fetch cart items');
                }
            })
            .then(cartItems => {
                const cartItemsList = document.getElementById('cartItemsList');
                cartItemsList.innerHTML = ''; // Clear existing items

                cartItems.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `Product ID: ${item.productId}, Product Name: ${item.productName}, Price: ${item.price}, Quantity: ${item.quantity}, Description: ${item.description}, Category: ${item.category}, Image URL: ${item.image}`;
                    cartItemsList.appendChild(li);
                });
            })
            .catch(error => {
                console.error('Error fetching cart items:', error);
            });
        }
        app.post('/addToCart', (req, res) => {
    console.log(req.body); // Log the request body to see the data received
    // Rest of your code to save the item to the database
});

        // Initial fetch of cart items when the page loads
        fetchCartItems();
    </script>
</body>
</html>
